# ğŸ›ï¸ HÆ¯á»šNG DáºªN KIáº¾N TRÃšC & LUá»’NG HOáº T Äá»˜NG NEO-JANUS

TÃ i liá»‡u nÃ y giáº£i thÃ­ch cÃ¡ch toÃ n bá»™ há»‡ thá»‘ng Neo-Janus váº­n hÃ nh nhÆ° má»™t cá»— mÃ¡y thá»‘ng nháº¥t vÃ  má»‘i quan há»‡ giá»¯a cÃ¡c file code.

---

## 1. Bá»©c Tranh Tá»•ng Thá»ƒ (Big Picture)

HÃ£y tÆ°á»Ÿng tÆ°á»£ng Neo-Janus giá»‘ng nhÆ° má»™t **TÃ²a nhÃ  An ninh**:

1.  **Frontend (Streamlit):** LÃ  cÃ¡i **Cá»•ng Giao Tiáº¿p**. KhÃ¡ch (User) Ä‘áº¿n Ä‘Ã¢y Ä‘á»ƒ nÃ³i chuyá»‡n.
2.  **Janus Core (Go):** LÃ  **PhÃ²ng Äiá»u HÃ nh Trung TÃ¢m**. Nháº­n yÃªu cáº§u tá»« cá»•ng, quyáº¿t Ä‘á»‹nh lÃ m gÃ¬ tiáº¿p theo.
3.  **Blue Sentinel (Python AI):** LÃ  **Vá»‡ SÄ© ThÃ´ng Minh**. PhÃ²ng Ä‘iá»u hÃ nh há»i: "CÃ¢u nÃ y an toÃ n khÃ´ng?", Vá»‡ sÄ© tráº£ lá»i "CÃ³" hoáº·c "KhÃ´ng".
4.  **Red Agent (Python Script):** LÃ  **Äá»™i Diá»…n Táº­p**. Cá»‘ tÃ¬nh Ä‘Ã³ng giáº£ káº» trá»™m Ä‘á»ƒ thá»­ thÃ¡ch Vá»‡ sÄ©.

---

## 2. CÃ¡c File Káº¿t Ná»‘i Vá»›i Nhau NhÆ° Tháº¿ NÃ o?

DÆ°á»›i Ä‘Ã¢y lÃ  sÆ¡ Ä‘á»“ "ÄÆ°á»ng Ä‘i cá»§a dá»¯ liá»‡u" qua tá»«ng file code quan trá»ng.

### ğŸ”„ Luá»“ng 1: Khi NgÆ°á»i DÃ¹ng Chat (User Flow)

**BÆ°á»›c 1: KhÃ¡ch gÃµ cá»­a**
* **File:** `4_frontend/app.py`
* **HÃ nh Ä‘á»™ng:** NgÆ°á»i dÃ¹ng nháº­p "Xin chÃ o". File nÃ y Ä‘Ã³ng gÃ³i cÃ¢u Ä‘Ã³ thÃ nh JSON vÃ  gá»­i má»™t bá»©c thÆ° (HTTP Request) Ä‘áº¿n Ä‘á»‹a chá»‰ `http://janus-core:8080`.

**BÆ°á»›c 2: PhÃ²ng Ä‘iá»u hÃ nh tiáº¿p nháº­n**
* **File:** `3_janus_core/internal/api/api.go` (HÃ m `handleAnalyze`)
* **HÃ nh Ä‘á»™ng:** Nháº­n bá»©c thÆ°. NÃ³ tháº¥y cáº§n kiá»ƒm tra an ninh, nÃªn nÃ³ gá»i Ä‘iá»‡n cho Vá»‡ SÄ© (Blue Sentinel).

**BÆ°á»›c 3: Vá»‡ sÄ© soi xÃ©t**
* **File:** `1_blue_sentinel/serve.py` (HÃ m `predict`)
* **HÃ nh Ä‘á»™ng:** Nháº­n cÃ¢u "Xin chÃ o".
    * NÃ³ nhá» `tokenizer.py` cáº¯t cÃ¢u thÃ nh sá»‘.
    * NÃ³ Ä‘Æ°a sá»‘ vÃ o `model.py` (Bá»™ nÃ£o AI).
    * Bá»™ nÃ£o dÃ¹ng `attention.py` Ä‘á»ƒ suy nghÄ©.
* **Káº¿t quáº£:** Tráº£ vá»: `{"safe": true, "score": 0.1}` cho PhÃ²ng Ä‘iá»u hÃ nh.

**BÆ°á»›c 4: Pháº£n há»“i**
* **File:** `3_janus_core/internal/api/api.go`
* **HÃ nh Ä‘á»™ng:** Nháº­n káº¿t quáº£ tá»« Vá»‡ sÄ©. Náº¿u an toÃ n -> Tráº£ lá»i User "OK". Náº¿u nguy hiá»ƒm -> Tráº£ lá»i User "Bá»‹ cháº·n!".

---

### ğŸš¨ Luá»“ng 2: Khi Red Team Táº¥n CÃ´ng (Attack Flow)

**BÆ°á»›c 1: Cháº¿ táº¡o vÅ© khÃ­**
* **File:** `2_red_agent/attack_lib/fuzzer.py`
* **HÃ nh Ä‘á»™ng:** Láº¥y má»™t cÃ¢u bÃ¬nh thÆ°á»ng, dÃ¹ng file `payloads.txt` vÃ  `teencode_map` Ä‘á»ƒ biáº¿n nÃ³ thÃ nh cÃ¢u Ä‘á»™c háº¡i (VD: "h4ck w1f1").

**BÆ°á»›c 2: Xáº£ Ä‘áº¡n**
* **File:** `2_red_agent/auto_attack.py`
* **HÃ nh Ä‘á»™ng:** Báº¯n liÃªn tá»¥c 100 cÃ¢u Ä‘á»™c háº¡i vÃ o PhÃ²ng Ä‘iá»u hÃ nh (`janus-core`).

**BÆ°á»›c 3: KÃ­ch hoáº¡t Vaccine (CÆ¡ cháº¿ tá»± vá»‡)**
* **File:** `3_janus_core/internal/vaccine/vaccine.go`
* **HÃ nh Ä‘á»™ng:**
    * PhÃ²ng Ä‘iá»u hÃ nh tháº¥y Vá»‡ sÄ© (Blue Sentinel) bá»‹ lá»«a (Cho qua cÃ¢u Ä‘á»™c háº¡i).
    * NÃ³ gá»i `vaccine.go` Ä‘á»ƒ ghi láº¡i cÃ¢u Ä‘Ã³ vÃ o sá»• Ä‘en (`vaccine_db.json`).
    * Láº§n sau, há»‡ thá»‘ng sáº½ há»c tá»« lá»—i láº§m nÃ y.

---

## 3. Giáº£i MÃ£ Chi Tiáº¿t CÃ¡c File (File Dictionary)

Äá»ƒ cÃ¡c báº¡n (Báº£o, HÃ¹ng, Tiáº¿n, HoÃ n) biáº¿t mÃ¬nh Ä‘ang code cÃ¡i gÃ¬:

### ğŸ”µ Folder: 1_blue_sentinel
* `serve.py`: **CÃ¡i miá»‡ng cá»§a AI**. GiÃºp AI nÃ³i chuyá»‡n Ä‘Æ°á»£c vá»›i tháº¿ giá»›i bÃªn ngoÃ i qua API.
* `model.py`: **Bá»™ nÃ£o**. Chá»©a kiáº¿n trÃºc máº¡ng nÆ¡-ron GPT.
* `attention.py`: **Ká»¹ nÄƒng táº­p trung**. GiÃºp AI xá»­ lÃ½ thÃ´ng tin nhanh hÆ¡n (Flash Attention).
* `tokenizer.py`: **NgÆ°á»i phiÃªn dá»‹ch**. Dá»‹ch tiáº¿ng Viá»‡t sang ngÃ´n ngá»¯ mÃ¡y.

### ğŸ”´ Folder: 2_red_agent
* `fuzzer.py`: **MÃ¡y táº¡o hÃ ng giáº£**. Biáº¿n chá»¯ thÆ°á»ng thÃ nh Teencode/LÃ³ng.
* `payloads.txt`: **Kho Ä‘áº¡n**. Chá»©a cÃ¡c cÃ¢u máº«u Ä‘á»ƒ táº¥n cÃ´ng.
* `auto_attack.py`: **SÃºng mÃ¡y**. Tá»± Ä‘á»™ng bÃ³p cÃ² báº¯n liÃªn thanh vÃ o server.

### ğŸŸ¡ Folder: 3_janus_core
* `main.go`: **ChÃ¬a khÃ³a khá»Ÿi Ä‘á»™ng**. NÆ¡i báº­t server lÃªn.
* `internal/api/api.go`: **NhÃ¢n viÃªn lá»… tÃ¢n**. Äá»©ng ra nháº­n yÃªu cáº§u vÃ  sai báº£o cÃ¡c bá»™ pháº­n khÃ¡c.
* `internal/vaccine/vaccine.go`: **BÃ¡c sÄ©**. Chá»¯a lÃ nh há»‡ thá»‘ng khi cÃ³ lá»— há»•ng.

### ğŸŸ¢ Folder: 4_frontend
* `app.py`: **MÃ n hÃ¬nh hiá»ƒn thá»‹**. Váº½ ra khung chat, nÃºt báº¥m, biá»ƒu Ä‘á»“.

### âš™ï¸ Folder: deploy (Cá»§a chung)
* `docker-compose.yml`: **Báº£n thiáº¿t káº¿ nhÃ **. Quy Ä‘á»‹nh phÃ²ng nÃ o náº±m á»Ÿ Ä‘Ã¢u, ná»‘i dÃ¢y Ä‘iá»‡n (port) nhÆ° tháº¿ nÃ o Ä‘á»ƒ cáº£ 4 Ã´ng trÃªn nhÃ¬n tháº¥y nhau.

---

## 4. CÃ¡ch Cháº¡y Há»‡ Thá»‘ng "Full Option"

Thay vÃ¬ cháº¡y tá»«ng file láº» táº», chÃºng ta dÃ¹ng `docker-compose` Ä‘á»ƒ báº­t cáº£ tÃ²a nhÃ  lÃªn cÃ¹ng lÃºc.

1.  **Docker Ä‘á»c file** `docker-compose.yml`.
2.  **NÃ³ dá»±ng 3 cÃ¡i mÃ¡y áº£o (Container):**
    * MÃ¡y 1: Cháº¡y `serve.py` (Cá»•ng 8001).
    * MÃ¡y 2: Cháº¡y `main.go` (Cá»•ng 8080) -> *ÄÆ°á»£c cáº¥u hÃ¬nh Ä‘á»ƒ gá»i MÃ¡y 1*.
    * MÃ¡y 3: Cháº¡y `app.py` (Cá»•ng 8501) -> *ÄÆ°á»£c cáº¥u hÃ¬nh Ä‘á»ƒ gá»i MÃ¡y 2*.
3.  **Káº¿t quáº£:** Báº¡n vÃ o `localhost:8501` (MÃ¡y 3) báº¥m chat -> NÃ³ cháº¡y vÃ²ng trÃ²n qua MÃ¡y 2 -> MÃ¡y 1 -> MÃ¡y 2 -> MÃ¡y 3 -> Hiá»‡n lÃªn mÃ n hÃ¬nh.

---
*TÃ i liá»‡u nÃ y Ä‘Æ°á»£c biÃªn soáº¡n Ä‘á»ƒ Ä‘áº£m báº£o má»i thÃ nh viÃªn hiá»ƒu rÃµ vá»‹ trÃ­ cá»§a mÃ¬nh trong há»‡ thá»‘ng.*